在 Rust 里，`String` 和 `str` 是两个常见但不同的类型，它们的区别主要在**是否可变**、**是否拥有所有权**以及**是否堆分配**。

---

## 1. `str` —— 字符串切片类型

- 类型：`str` 是一种**动态大小类型**（DST，dynamically sized type）。
- 本身不能单独作为变量存在，通常以引用形式出现：`&str`。
- 存储位置：可以是**常量数据（例如字面量字符串）**或**某个 String 里的部分数据**。
- 特点：
  - **不可变**：`&str` 指向的内容不能直接修改。
  - **无所有权**：它只是对一段 UTF-8 编码文本的**借用引用**。
- 常见用途：用于传递只读字符串数据，例如函数参数。

```rust
fn greet(name: &str) {
    println!("Hello, {}!", name);
}

fn main() {
    let s: &str = "world"; // 字面量&str
    greet(s);

    let string_obj = String::from("Rust");
    greet(&string_obj); // &String 自动转换为 &str
}
```

---

## 2. `String` —— 可拥有的堆分配字符串

- 类型：`String` 是一个**拥有所有权**、**可增长修改**的字符串类型。
- 存储位置：
  - 结构体本身在栈上
  - 内部的字符串内容存储在**堆内存中**
- 特点：
  - 可以修改：`push`, `push_str`, `pop` 等方法。
  - 可变长度：可以追加或删除字符。
  - 拥有数据的所有权，生命周期由变量控制。
- 常见用途：存储和操作需要动态改变的字符串数据。

```rust
fn main() {
    let mut s = String::from("Hello");
    s.push_str(", world!");
    println!("{}", s);
}
```

---

## 3. 关系
- `String` 和 `&str` 都是 UTF-8 编码的文本序列。
- 可以**从 `String` 得到 `&str`**（借用），反之需要**分配创建新的 String**：
```rust
let s1 = String::from("hello"); // 堆分配
let s2: &str = &s1; // 借用，指向同一段数据
let s3 = "world"; // string literal: &'static str

let s4 = s3.to_string(); // 从 &str 创建 String
```

---

### 核心区别总结表：

| 特性         | `String`                   | `str` / `&str`               |
| ------------ | -------------------------- | ---------------------------- |
| 是否有所有权 | ✅ 有                       | ❌ 无                         |
| 存储位置     | 栈中保存指针，数据在堆中   | 栈上的引用指向一段数据       |
| 是否可变     | 可变（`mut`）              | 不可变                       |
| 是否长度可变 | ✅                          | ❌                            |
| 类型大小     | 固定大小（指针+长度+容量） | 动态大小（必须通过引用使用） |
| 常见用途     | 存储、修改、拥有字符串数据 | 只读视图、传递只读数据引用   |

---
